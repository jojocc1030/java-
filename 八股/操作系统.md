---

mindmap-plugin: basic

---

# 操作系统

## 硬件
- Sub title
	- **常见寄存器**
		- **通用寄存器**
		_通用寄存器_，用来存放需要进行运算的数据，比如需要进行加和运算的两个数据。
		- **程序计数器**
		_程序计数器_，用来`存储 CPU 要执行下一条指令「所在的内存地址」`，注意不是存储了下一条要执行的指令，此时指令还在内存中，程序计数器只是存储了下一条指令「的地址」。
		- **指令寄存器**
		_指令寄存器_，用来存放当前正在执行的指令，也就是指令本身，指令被执行完成之前，指令都存储在这里。
	- **程序执行基本过程**
	简单总结一下就是，一个程序执行的时候，CPU 会根据`程序计数器`里的`内存地址`，从内存里面把需要执行的指令读取到指令寄存器里面执行，然后根据`指令长度自增`，开始顺序读取下一条指令。
	CPU 从程序计数器读取指令、到执行、再到下一条指令，这个过程会不断循环，直到程序执行结束，这个不断循环的过程被称为 **CPU 的指令周期**。
	- **存储器的层次结构**
		- ![[存储区分级.webp]]
	- **中断**
	中断是一种`异步的事件处理机制`，可以提高系统的`并发处理能力`。在计算机中，中断是系统用来响应硬件设备请求的一种机制，操作系统收到硬件的中断请求，会打断正在执行的进程，然后调用`内核中的中断处理程序`来响应请求。
	操作系统收到了中断请求，会打断其他进程的运行，所以**中断请求的响应程序，也就是中断处理程序，要尽可能快的执行完，这样可以减少对正常进程运行调度地影响。**那 Linux 系统**为了`解决中断处理程序执行过长和中断丢失`的问题，将中断过程分成了两个阶段，分别是「上半部和下半部分」**。
		- **上半部用来快速处理中断**，一般会暂时关闭中断请求，主要负责处理跟硬件紧密相关或者时间敏感的事情。**上半部直接处理硬件请求，也就是硬中断**，主要是负责`耗时短的工作`，特点是`快速执行`；
		- **下半部用来延迟处理上半部未完成的工作**，一般以「内核线程」的方式运行。**下半部是由内核触发，也就说软中断**，主要是负责上半部未完成的工作，通常都是`耗时比较长`的事情，特点是`延迟执行`；
		- 还有一个区别，`硬中断（上半部）是会打断 CPU 正在执行的任务`，然后立即执行中断处理程序，而`软中断（下半部）是以内核线程的方式执行`，并且每一个 CPU 都对应一个软中断`内核线程`，名字通常为「ksoftirqd/CPU 编号」，比如 0 号 CPU 对应的软中断内核线程的名字是 `ksoftirqd/0`

## 进程管理
- 进程状态
	- 创建状态
	- 结束状态
	- 就绪状态
	- 阻塞状态
	- 运行状态
	- 挂起状态：描述进程`没有占用实际的物理内存空间的情况`
		- 就绪**挂起状态**: 进程在外存（硬盘），但只要进入内存，即刻立刻运行；
		- 阻塞**挂起状态**: 进程在外存（硬盘）并等待某个事件的出现；
- PCB：进程控制块
	- 每个PCB如何组织？
	通常是通过**链表**的方式进行组织，把具有**相同状态的进程链在一起，组成各种队列**。
	-  **PCB 是进程存在的唯一标识**
		- 进程标识符
		- 用户标识符
- 进程控制
	- 创建
	- 终止
	- 阻塞
	- 唤醒